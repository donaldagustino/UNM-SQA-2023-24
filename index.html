<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Short Youtube SQA Videos</title>
    <style>
      * {
        margin: 0px;
      }

      .video {
        margin: 8px;
      }
    </style>
  </head>
  <div id="wrapper"></div>
  <body>
    <script>
      const wrapperRef = document.getElementById("wrapper");
      const tag = document.createElement("script");

      tag.src = "https://www.youtube.com/iframe_api";
      const firstScriptTag = document.getElementsByTagName("script")[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      const videos = [];
      const players = [];

      window.onload = async () => {
        const response = await fetch(
          `https://youtube.googleapis.com/youtube/v3/search?part=snippet&q=SQA&maxResults=12&key=AIzaSyBz2ATn1JMqtkQoU19EMWmYRO5u_2FB9yA`
        );

        const { items } = await response.json();

        videos.push(...items);

        for (let i = 0; i < items.length; i++) {
          wrapperRef.innerHTML += `<div id="player-${
            i + 1
          }" class="video"></div>`;
        }

        await createPlayerIframe();
      };

      const createPlayerIframe = async () => {
        return new Promise((resolve, reject) => {
          videos.forEach((item, index) => {
            players.push(
              new YT.Player(`player-${index + 1}`, {
                height: "200",
                width: "360",
                videoId: item?.id.videoId,
              })
            );
          });
        });
      };
    </script>
  </body>
</html>